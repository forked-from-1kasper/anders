{- Ã‰tale Maps.
   EGA4 4.1 Etale maps

   Copyright Â© Groupoid Infinity, 2021â€”2022,
             Â© @siegment, 2022 -}

import library/data/path
import library/modal/infinitesimal
import library/mathematics/pullback

{-
       Î¹ A
    A â€•â€•â€•â€•â†’ â„‘ A
    |        |
  f |        | â„‘ f
    â†“        â†“
    B â€•â€•â€•â€•â€•â†’ â„‘ B
       Î¹ B
-}

def isÃ‰taleMap (A B : U) (f : A â†’ B) : U :=
isPullbackSq A (â„‘ A) B (â„‘ B) (â„‘-app A B f) (Î¹ B) (Î¹ A) f (Î» (a : A), <_> â„‘-unit (f a))

def Ã‰taleMap (A B : U) : U := Î£ (f : A â†’ B), isÃ‰taleMap A B f
def isÃ‰tale (A : U) := isÃ‰taleMap A ğŸ (Î» (_ : A), â˜…)